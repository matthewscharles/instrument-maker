#N canvas 216 136 940 593;
#X obj 50 341 phasor~;
#X obj 256 265 timer;
#X msg 155 168 stop;
#X obj 159 90 snapshot~;
#X obj 169 69 bang~;
#X obj 155 140 sel 0 1;
#X obj 159 116 change;
#X obj 233 106 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X floatatom 256 287 5 0 0 0 - - -;
#X floatatom 31 226 5 0 0 0 - - -;
#X obj 69 225 expr 1000 / $f1;
#X obj 491 271 samplerate~;
#X obj 491 248 loadbang;
#X floatatom 491 291 5 0 0 0 - - -;
#X obj 535 338 v samplerate;
#X obj 257 306 sig~;
#X obj 494 336 * 60;
#X msg 193 170 bang;
#X msg 62 160 bang;
#X msg 101 162 stop;
#X obj 494 365 array size \$0-loopbuffer;
#X obj 71 202 tabwrite~ \$0-loopbuffer;
#X obj 51 412 tabread~ \$0-loopbuffer;
#X obj 51 389 expr~ $v1 * samplerate * $v2 / 1000;
#X obj 491 223 array define \$0-loopbuffer;
#X obj 493 311 t f f, f 7;
#X obj 69 252 sig~;
#X obj 51 292 *~;
#X obj 341 89 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 315 146 snapshot~;
#X obj 360 129 bang~;
#X obj 315 168 change;
#X obj 315 193 sel 0;
#X text 360 195 set phase to 0 when we reset;
#X msg 315 214 0;
#X obj 50 518 *~;
#X obj 50 559 outlet~;
#X text 81 455 because we don't want to keep sending out the last sample
;
#X text 368 335 max sample time 60s;
#X text 290 352 (could have this as an argument);
#X obj 51 366 *~;
#X obj 321 16 inlet~ play;
#X obj 159 13 inlet~ record;
#X obj 37 129 inlet~ input;
#X obj 480 6 inlet~;
#X obj 572 66 audio.argument;
#X obj 557 112 *~ 1;
#X obj 556 36 sig~ 1;
#X obj 425 25 snapshot~;
#X obj 439 6 bang~;
#X obj 425 71 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 425 48 == 0;
#X obj 490 150 *~ 1;
#X obj 50 316 *~;
#X obj 255 331 /~;
#X obj 321 40 expr~ $v1 > 0.1;
#X obj 159 40 expr~ $v1 > 0.1;
#X obj 665 149 \$1;
#X text 363 413 if added 1 then disable loop and disable stop;
#X obj 663 116 loadbang;
#X obj 292 387 bang~;
#X obj 248 435 snapshot~;
#X obj 252 482 > 0.99;
#X obj 248 414 spigot;
#X obj 252 503 change;
#X obj 252 524 sel 1;
#X msg 252 545 0;
#X obj 463 477 expr 1 - $f1;
#X obj 64 486 expr~ $v1 || $v2;
#X obj 463 506 sig~;
#X connect 0 0 40 0;
#X connect 0 0 61 0;
#X connect 1 0 8 0;
#X connect 2 0 21 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 5 0 2 0;
#X connect 5 0 1 1;
#X connect 5 1 17 0;
#X connect 5 1 1 0;
#X connect 6 0 5 0;
#X connect 7 0 5 0;
#X connect 8 0 10 0;
#X connect 8 0 15 0;
#X connect 10 0 9 0;
#X connect 10 0 26 0;
#X connect 11 0 13 0;
#X connect 12 0 11 0;
#X connect 13 0 25 0;
#X connect 15 0 54 0;
#X connect 16 0 20 0;
#X connect 17 0 21 0;
#X connect 18 0 21 0;
#X connect 19 0 21 0;
#X connect 22 0 35 0;
#X connect 23 0 22 0;
#X connect 25 0 16 0;
#X connect 25 1 14 0;
#X connect 26 0 27 0;
#X connect 27 0 53 0;
#X connect 28 0 29 0;
#X connect 29 0 31 0;
#X connect 30 0 29 0;
#X connect 31 0 32 0;
#X connect 32 0 34 0;
#X connect 34 0 0 1;
#X connect 35 0 36 0;
#X connect 40 0 23 0;
#X connect 41 0 55 0;
#X connect 42 0 56 0;
#X connect 43 0 21 0;
#X connect 44 0 48 0;
#X connect 44 0 52 0;
#X connect 45 0 46 1;
#X connect 46 0 52 0;
#X connect 47 0 46 0;
#X connect 48 0 51 0;
#X connect 49 0 48 0;
#X connect 50 0 45 0;
#X connect 51 0 50 0;
#X connect 52 0 40 1;
#X connect 52 0 53 1;
#X connect 52 0 54 1;
#X connect 53 0 0 0;
#X connect 54 0 23 1;
#X connect 55 0 29 0;
#X connect 55 0 27 1;
#X connect 55 0 68 0;
#X connect 56 0 3 0;
#X connect 57 0 63 1;
#X connect 57 0 69 0;
#X connect 59 0 57 0;
#X connect 60 0 63 0;
#X connect 61 0 62 0;
#X connect 62 0 64 0;
#X connect 63 0 61 0;
#X connect 64 0 65 0;
#X connect 65 0 66 0;
#X connect 66 0 32 0;
#X connect 67 0 69 0;
#X connect 68 0 35 1;
#X connect 69 0 68 1;
#X coords 0 -1 1 1 15 15 1 0 800;
